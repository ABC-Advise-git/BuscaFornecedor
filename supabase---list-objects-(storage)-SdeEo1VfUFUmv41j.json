{"updatedAt":"2025-12-01T14:49:39.899Z","createdAt":"2025-10-30T18:23:31.438Z","id":"SdeEo1VfUFUmv41j","name":"Supabase - List Objects (Storage)","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[32,-160],"id":"1bd97c1d-5714-4d6a-94e7-801a077a2e29","name":"When clicking ‘Execute workflow’"},{"parameters":{"operation":"select","schema":{"__rl":true,"value":"busca_fornecedor","mode":"list","cachedResultName":"busca_fornecedor"},"table":{"__rl":true,"value":"supplier_documents","mode":"list","cachedResultName":"supplier_documents"},"where":{"values":[{"column":"supplier_id","value":"={{ $json.id }}"}]},"options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[432,-160],"id":"07316f48-ea81-4ccb-8ea4-6af831f2446d","name":"select_docs","credentials":{"postgres":{"id":"8MXZ6U3UVpvutTEe","name":"Supabase"}}},{"parameters":{"operation":"select","schema":{"__rl":true,"value":"busca_fornecedor","mode":"list","cachedResultName":"busca_fornecedor"},"table":{"__rl":true,"value":"usuario_fornecedor","mode":"list","cachedResultName":"usuario_fornecedor"},"limit":1,"where":{"values":[{"column":"id","value":"6b543c9c-d3a7-4e18-9742-8a9d4a62d7fa"}]},"options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[240,-160],"id":"bfcce232-3639-4933-9f99-adab876120c0","name":"select_fornecedor","credentials":{"postgres":{"id":"8MXZ6U3UVpvutTEe","name":"Supabase"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.document_type }}","rightValue":"presentation","operator":{"type":"string","operation":"equals"},"id":"48c4facc-b319-4d7d-8781-fa63bb4d1906"}],"combinator":"and"},"renameOutput":true,"outputKey":"Apresentação"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"a72e48c5-2a7e-4cf4-94a8-e2110e968dd9","leftValue":"={{ $json.document_type }}","rightValue":"case_study","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Caso de Estudo"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"32fc84c9-6563-472e-8690-c1c61bd50ea4","leftValue":"={{ $json.document_type }}","rightValue":"negative_certificate","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Certidão Negativa"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"062daeaf-2c64-4035-a85c-ab2ef5748424","leftValue":"={{ $json.document_type }}","rightValue":"certificacoes","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Certificações"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[624,-192],"id":"ee5a6fa1-3894-42da-ba98-57ceba7dd50f","name":"Switch"},{"parameters":{"method":"POST","url":"=https://apiget-docs-buscafornecedor.up.railway.app/api/convert","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"},{"name":"Accept","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"id\": \"doc-teste-1\",\n  \"path\": {{ $json.file_path }}\n} ","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[976,-416],"id":"cd5ad910-8bbd-4bca-be21-049a0b9b32f3","name":"convert_docs_apresentação"},{"parameters":{"method":"POST","url":"=https://apiget-docs-buscafornecedor.up.railway.app/api/convert","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"},{"name":"Accept","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"id\": \"doc-teste-1\",\n  \"path\": {{ $json.file_path }}\n} ","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[976,-240],"id":"fd9cea61-9e04-4381-a04c-36880c998e4a","name":"convert_docs_caso_de_estudo"},{"parameters":{"method":"POST","url":"=https://apiget-docs-buscafornecedor.up.railway.app/api/convert","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"},{"name":"Accept","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"id\": \"doc-teste-1\",\n  \"path\": {{ $json.file_path }}\n} ","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[976,-64],"id":"4e1fd3ec-2bf9-4e98-8849-2f66f7859d2d","name":"convert_docs_certidão_negativa"},{"parameters":{"method":"POST","url":"=https://apiget-docs-buscafornecedor.up.railway.app/api/convert","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"},{"name":"Accept","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"id\": \"doc-teste-1\",\n  \"path\": {{ $json.file_path }}\n} ","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[976,112],"id":"340cacfb-8c17-4f0d-a7b6-e496fc902ccf","name":"convert_docs_certificação"}],"connections":{"When clicking ‘Execute workflow’":{"main":[[{"node":"select_fornecedor","type":"main","index":0}]]},"select_fornecedor":{"main":[[{"node":"select_docs","type":"main","index":0}]]},"select_docs":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[{"node":"convert_docs_apresentação","type":"main","index":0}],[{"node":"convert_docs_caso_de_estudo","type":"main","index":0}],[{"node":"convert_docs_certidão_negativa","type":"main","index":0}],[{"node":"convert_docs_certificação","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"51510731-1b6f-48ea-8311-964f594a330f","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-10-30T18:23:31.438Z","createdAt":"2025-10-30T18:23:31.438Z","role":"workflow:owner","workflowId":"SdeEo1VfUFUmv41j","projectId":"jk0yZKautC5L7CBp"}],"activeVersion":null,"tags":[]}